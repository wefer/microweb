{% extends "base.html" %}

{% block head %}
{{ super() }}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='table.css') }}">
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.24.6/js/jquery.tablesorter.js"></script>
<script>
$(function () {
  $('#chart').highcharts({
    chart: {
      type: 'column',
      marginBottom: 20,
      spacingBottom: 40
    },
    credits: {enabled: false
    },
    title: {
      text: 'Taxonomic composition'
    },
    xAxis: {
      categories: {{ categories|safe }}
    },
    yAxis: {
      min: 0,
      max: 100,
      title: {
        text: 'Relative abundance'
      },
      stackLabels: {
        enabled: false,
        style: {
          fontWeight: 'bold',
          color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
        }
      }
    },
    legend: {
      enabled: false,
      align: 'right',
      x: -30,
      verticalAlign: 'bottom',
      y: 27,
      floating: true,
      backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || 'white',
      borderColor: '#CCC',
      borderWidth: 1,
      shadow: false
    },
    tooltip: {
      headerFormat: '<b>{point.x}</b><br/>',
      pointFormat: '{series.name}: {point.percentage:.0f}%'
    },
    plotOptions: {
      column: {
        stacking: 'percent',
        dataLabels: {
          enabled: false,
          color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white',
          style: {
            textShadow: '0 0 3px black'
          }
        }
      }
    },
    series: {{ series|safe }}
  });
});

</script>
{% endblock %}

{% block page_content %}
<div id="chart" style="min-width: 200px; height: 450px; margin: 20 auto"></div></br></br>
<table id="myTable" class="tablesorter">
  <thead>
  <tr>
    <th>Taxonomy</th>
    {% for item in categories %}
      <th align="center">{{ item }}</th>
    {% endfor %}
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>1</td>
    <td>2</td>
  </tr>
  <tr>
    <td>2</td>
    <td>1</td>
  </tr>
  </tbody>
</table>

<script>
  $(document).ready(function()
    {
      $("#myTable").tablesorter();
    });
</script>

{% endblock %}
